<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Johniverse Portal ðŸŒŒ</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Roboto',sans-serif;}
body{background:#111;color:#fff;min-height:100vh;transition:background 1s;}
header{width:100%;padding:10px;background:#1a1a1a;text-align:center;font-size:24px;font-weight:bold;color:#d7baff;box-shadow:0 4px 10px rgba(0,0,0,0.5);}
.container, #dashboard{display:none;background:rgba(20,20,20,0.95);border-radius:15px;box-shadow:0 10px 20px rgba(0,0,0,0.6);padding:20px;width:95%;max-width:1000px;margin:20px auto;}
h1,h2,h3{margin-bottom:10px;color:#d7baff;}
input,button,select,textarea{padding:10px;margin:5px 0;border-radius:5px;border:none;}
button{background:linear-gradient(90deg,#a84eff,#ff4b8d);cursor:pointer;font-weight:bold;transition:all 0.2s;}
button:hover{transform:scale(1.05);opacity:0.9;}
input,textarea{width:100%;background:#222;color:#fff;}
.panel{background:#222;border-radius:10px;padding:10px;margin:10px 0;box-shadow:0 4px 8px rgba(0,0,0,0.4);}
.panel h3{margin-bottom:5px;color:#ffaaff;}
#chat-box{height:200px;overflow-y:auto;padding:10px;background:#333;border-radius:5px;}
.friend-item{padding:5px;margin:2px;background:#333;border-radius:5px;cursor:pointer;}
.friend-item:hover{background:#555;}
#game-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;margin-top:10px;}
.game-card{background:#222;border-radius:10px;padding:10px;text-align:center;cursor:pointer;transition:0.2s;}
.game-card:hover{transform:scale(1.05);background:#444;}
#pfp{border-radius:50%;border:3px solid #a84eff;width:100px;height:100px;margin-bottom:10px;}
input.small,button.small{width:48%;display:inline-block;margin-right:4%;}
iframe{width:100%;height:300px;border:none;border-radius:10px;margin-top:5px;}
.news-item{padding:5px;border-bottom:1px solid #555;margin-bottom:5px;}
.news-item:last-child{border:none;}
</style>
</head>
<body>

<header>Johniverse Portal ðŸŒŒ</header>

<!-- Login -->
<div class="container" id="login-container">
<h1>Login</h1>
<input type="email" id="login-email" placeholder="Email">
<input type="password" id="login-password" placeholder="Password">
<button onclick="login()">Login</button>
<p style="text-align:center;margin-top:5px;cursor:pointer;color:#a84eff;" onclick="showSignup()">Create Account</p>
</div>

<!-- Signup -->
<div class="container" id="signup-container">
<h1>Sign Up</h1>
<input type="email" id="signup-email" placeholder="Email">
<input type="text" id="signup-username" placeholder="Username">
<input type="password" id="signup-password" placeholder="Password">
<button onclick="signup()">Create Account</button>
<p style="text-align:center;margin-top:5px;cursor:pointer;color:#a84eff;" onclick="showLogin()">Back to Login</p>
</div>

<!-- Dashboard -->
<div id="dashboard">
<div style="display:flex;flex-wrap:wrap;align-items:flex-start;justify-content:space-between;">
  <div style="flex:1;min-width:280px;margin:10px;">
    <div class="panel" style="text-align:center;">
      <img id="pfp" src="https://i.imgur.com/fb7yZkX.png">
      <h2 id="username-display">Welcome</h2>
      <div style="display:flex;justify-content:space-between;">
        <button class="small" onclick="changePfp()">Change PFP</button>
        <button class="small" onclick="changeUsername()">Change Username</button>
      </div>
      <button style="margin-top:10px;" onclick="logout()">Logout</button>
      <p>Online Users: <span id="online-count">0</span></p>
    </div>

    <div class="panel">
      <h3>Friends</h3>
      <input type="text" id="friend-search" placeholder="Search by email or username" oninput="searchFriends()">
      <div id="friend-list" style="max-height:200px;overflow-y:auto;"></div>
    </div>

    <div class="panel">
      <h3>Global Chat</h3>
      <div id="chat-box"></div>
      <input type="text" id="chat-input" placeholder="Type message" onkeypress="if(event.key==='Enter'){sendChat()}">
      <button onclick="sendChat()">Send</button>
    </div>
  </div>

  <div style="flex:2;min-width:400px;margin:10px;">
    <div class="panel">
      <h3>Games</h3>
      <div id="game-container">
        <div class="game-card" onclick="startPingPong()">Ping Pong</div>
        <div class="game-card" onclick="startSnake()">Snake</div>
        <div class="game-card" onclick="startStar()">Click Star</div>
      </div>
    </div>

    <div class="panel">
      <h3>Portable Wikipedia</h3>
      <input type="text" id="wiki-search" placeholder="Search Wikipedia">
      <button onclick="searchWiki()">Search</button>
      <iframe id="wiki-frame"></iframe>
    </div>

    <div class="panel">
      <h3>Portable YouTube + Google</h3>
      <input type="text" id="yt-search" placeholder="Search YouTube">
      <button onclick="searchYT()">Search YouTube</button>
      <input type="text" id="google-search" placeholder="Search Google" style="margin-top:5px;">
      <button onclick="searchGoogle()">Search Google</button>
      <iframe id="yt-frame"></iframe>
      <iframe id="google-frame"></iframe>
    </div>

    <div class="panel">
      <h3>Latest News</h3>
      <div id="news-feed"></div>
    </div>
  </div>
</div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
<script>
// Firebase setup
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  databaseURL: "https://YOUR_PROJECT.firebaseio.com",
  projectId: "YOUR_PROJECT",
  storageBucket: "YOUR_PROJECT.appspot.com",
  messagingSenderId: "SENDER_ID",
  appId: "APP_ID"
};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();

// Random backgrounds
const backgrounds=[
  'https://wallpapercave.com/wp/wp10816761.jpg',
  'https://wallpapercave.com/wp/wp10593829.jpg',
  'https://wallpapercave.com/wp/wp10816750.jpg'
];
function setRandomBackground(){document.body.style.backgroundImage=`url(${backgrounds[Math.floor(Math.random()*backgrounds.length)]})`;}
setRandomBackground(); setInterval(setRandomBackground,15000);

// Show login/signup
function showSignup(){document.getElementById("login-container").style.display="none";document.getElementById("signup-container").style.display="block";}
function showLogin(){document.getElementById("signup-container").style.display="none";document.getElementById("login-container").style.display="block";}

// Signup/Login
function signup(){
  const email=document.getElementById("signup-email").value;
  const username=document.getElementById("signup-username").value;
  const password=document.getElementById("signup-password").value;
  if(!email||!username||!password){alert("Fill all fields!");return;}
  localStorage.setItem(email,JSON.stringify({username,password,pfp:"https://i.imgur.com/fb7yZkX.png"}));
  localStorage.setItem("currentUser",email); loadDashboard();
}
function login(){
  const email=document.getElementById("login-email").value;
  const password=document.getElementById("login-password").value;
  const data=JSON.parse(localStorage.getItem(email));
  if(!data||data.password!==password){alert("Invalid login!");return;}
  localStorage.setItem("currentUser",email); loadDashboard();
}

// Dashboard
function loadDashboard(){
  const email=localStorage.getItem("currentUser");
  const data=JSON.parse(localStorage.getItem(email));
  document.getElementById("login-container").style.display="none";
  document.getElementById("signup-container").style.display="none";
  document.getElementById("dashboard").style.display="block";
  document.getElementById("username-display").innerText="Welcome "+data.username;
  document.getElementById("pfp").src=data.pfp;
  loadNews();
}

// Logout
function logout(){localStorage.removeItem("currentUser");location.reload();}

// Change PFP & Username
function changePfp(){
  const input=document.createElement("input"); input.type="file"; input.accept="image/*";
  input.onchange=e=>{
    const file=e.target.files[0]; const reader=new FileReader();
    reader.onload=function(){
      const email=localStorage.getItem("currentUser");
      const data=JSON.parse(localStorage.getItem(email));
      data.pfp=reader.result;
      localStorage.setItem(email,JSON.stringify(data));
      document.getElementById("pfp").src=reader.result;
    }
    reader.readAsDataURL(file);
  }
  input.click();
}
function changeUsername(){
  const newName=prompt("Enter new username"); if(!newName)return;
  const email=localStorage.getItem("currentUser"); const data=JSON.parse(localStorage.getItem(email));
  data.username=newName; localStorage.setItem(email,JSON.stringify(data));
  document.getElementById("username-display").innerText="Welcome "+newName;
}

// Friends
function searchFriends(){
  const val=document.getElementById("friend-search").value.toLowerCase();
  const list=document.getElementById("friend-list"); list.innerHTML="";
  for(let i=0;i<localStorage.length;i++){
    const key=localStorage.key(i); if(key==="currentUser")continue;
    const data=JSON.parse(localStorage.getItem(key));
    if(data.username.toLowerCase().startsWith(val)||key.toLowerCase().startsWith(val)){
      const div=document.createElement("div"); div.className="friend-item";
      div.innerText=data.username+" ("+key+")"; div.onclick=()=>alert("Friend request sent to "+data.username);
      list.appendChild(div);
    }
  }
}

// Global Chat
function loadChat(){
  const chatBox=document.getElementById("chat-box");
  db.ref("chat").on("child_added",snapshot=>{
    const val=snapshot.val();
    const div=document.createElement("div"); div.innerText=val.user+": "+val.message;
    chatBox.appendChild(div); chatBox.scrollTop=chatBox.scrollHeight;
  });
}
function sendChat(){
  const msg=document.getElementById("chat-input").value; if(!msg)return;
  const user=JSON.parse(localStorage.getItem(localStorage.getItem("currentUser"))).username;
  db.ref("chat").push({user,message:msg});
  document.getElementById("chat-input").value="";
}

// Wikipedia / YouTube / Google
function searchWiki(){const q=document.getElementById("wiki-search").value;document.getElementById("wiki-frame").src="https://en.m.wikipedia.org/wiki/"+encodeURIComponent(q);}
function searchYT(){const q=document.getElementById("yt-search").value;document.getElementById("yt-frame").src="https://www.youtube.com/results?search_query="+encodeURIComponent(q);}
function searchGoogle(){const q=document.getElementById("google-search").value;document.getElementById("google-frame").src="https://www.google.com/search?q="+encodeURIComponent(q);}

// Games
function startPingPong(){window.open("https://example.com/pingpong");}
function startSnake(){window.open("https://example.com/snake");}
function startStar(){window.open("https://example.com/clickstar");}

// News
const newsData=[
{title:"Ukraine Conflict Escalates",desc:"Ukrainian President met with UK leader to discuss Russia."},
{title:"Trump Addresses UN",desc:"Trump delivered a speech at the UN emphasizing his stance."},
{title:"WHO Updates Medicines",desc:"WHO added key cancer and diabetes treatments."},
{title:"Iran-Russia Relations",desc:"Strengthening ties between Iran and Russia."},
{title:"Gaza Conflict",desc:"Israel conducted airstrikes in Gaza."},
{title:"Bus Tragedy in India",desc:"Bus fire in Kurnool resulted in 20 fatalities."}
];
function loadNews(){
  const feed=document.getElementById("news-feed"); feed.innerHTML="";
  newsData.forEach(n=>{
    const div=document.createElement("div"); div.className="news-item";
    div.innerHTML="<b>"+n.title+"</b><br>"+n.desc;
    feed.appendChild(div);
  });
}

// Initialize
window.onload=()=>{
  if(localStorage.getItem("currentUser"))loadDashboard();
  loadChat();
}
</script>
</body>
</html>
